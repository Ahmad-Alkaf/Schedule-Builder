(()=>{"use strict";const h=["Saturday","Sunday","Monday","Tuesday","Wednesday","Thursday"];var n=new class S{constructor(){this.LECTURE_DURATIONS=[1,1.5,2,2.5,3],this.START_TIME=8,this.START_TIMES=[8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5],this.STEP_TIME=.5,this.MAX_LECTURE_DURATION=this.LECTURE_DURATIONS.reduce((e,i)=>e>i?e:i),this.MIN_LECTURE_DURATION=this.LECTURE_DURATIONS.reduce((e,i)=>e<i?e:i),this.LAST_START_TIME=this.START_TIMES[this.START_TIMES.length-1]}};function T(t,e,i){return!(0==function g(t,e){return!(c([...t,e],e.lecture)>e.lecture.weekDuration)}(t,e)||0==function R(t,e){for(let i of t)if(i.day==e.day){if(i.startTime<=e.startTime&&i.startTime+i.duration>e.startTime)return!1;if(e.startTime<=i.startTime&&e.startTime+e.duration>i.startTime)return!1}return!0}(t,e)||0==function A(t){return!(n.START_TIME>t.startTime||n.LAST_START_TIME-n.STEP_TIME<t.startTime||t.startTime+t.duration>n.LAST_START_TIME+n.STEP_TIME)}(e)||0==function p(t,e){return!(t.filter(i=>i.day==e.day&&f(i.lecture,e.lecture)).reduce((i,r)=>r.duration+i,0)+e.duration>n.MAX_LECTURE_DURATION)}(t,e)||0==function I(t,e){for(let i of e)for(let r of i.lectures)if(r.day==t.day){if(t.startTime>=r.startTime&&r.startTime+r.duration>t.startTime&&(r.lecture.room==t.lecture.room||r.lecture.teacher==t.lecture.teacher))return!1;if(r.startTime>=t.startTime&&t.startTime+t.duration>r.startTime&&(r.lecture.room==t.lecture.room||r.lecture.teacher==t.lecture.teacher))return!1}return!0}(e,i))}function d(t,e){return c(e,t)<t.weekDuration}function c(t,e){var i=0;for(let r of t)f(r.lecture,e)&&(i+=Number(r.duration));return i}function f(t,e){return t.teacher==e.teacher&&t.room==e.room&&t.name==e.name}onmessage=({data:t})=>{var e=JSON.parse(t);console.log(e);try{var i=function E(t,e,i){let r=n.LECTURE_DURATIONS.reverse(),u=n.START_TIMES,s=h,o=[],a={stage:"before",i:{staticLec:0,day:0,startTime:0,duration:0}};o.push(a);t:for(;0!==o.length;)switch(a=o.pop(),console.log("snapshots=",o.length),a.stage){case"before":for(;a.i.staticLec<t.length;a.i.staticLec++,a.i.day=0)if(d(t[a.i.staticLec],e)){for(;a.i.day<s.length;a.i.day++,a.i.startTime=0)for(;a.i.startTime<u.length;a.i.startTime++,a.i.duration=0)for(;a.i.duration<r.length;a.i.duration++){var l={lecture:t[a.i.staticLec],duration:r[a.i.duration],day:s[a.i.day],startTime:u[a.i.startTime]};if(T(e,l,i)){e.push(l),a.stage="after",a.newLec=l,o.push(a),o.push({stage:"before",i:{staticLec:0,day:0,startTime:0,duration:0}});continue t}}continue t}return e;case"after":console.assert(void 0!==a.newLec,"newLec should not be undefined but got="+a.newLec),e.splice(e.indexOf(a.newLec),1),a.stage="before",a.i.duration++,o.push(a)}return null}(...e);postMessage(JSON.stringify(i))}catch(r){console.error("Error: Worker > generateSchedule > catch > e = ",r),postMessage(JSON.stringify(null))}}})();